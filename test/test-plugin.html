<!DOCTYPE html>
<html>
<head>
  <title>Plugin Test</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>Plugin Test</h1>
  <div id="test-output"></div>
  <script type="module">
    import * as TweakpaneCompactKit from '/tweakpane-compact-kit';

    // Test if plugins are available
    const output = document.getElementById('test-output');

    output.innerHTML = `
<b>Available exports:</b><pre>
${Object.keys(TweakpaneCompactKit).join('\n')}</pre>

<b>SplitLayoutPlugin:</b> <span id="splitlayout-plugin-status">Loading...</span><br>
<b>SizedButtonPlugin:</b> <span id="sizedbutton-plugin-status">Loading...</span>

<script>
    // Test loading the plugins
    import('tweakpane').then((tweakpane) => {
      window.tweakpane = tweakpane;

      // Test SplitLayoutPlugin
      try {
        document.getElementById('splitlayout-plugin-status').textContent = 'Available';
      } catch (e) {
        document.getElementById('splitlayout-plugin-status').textContent = 'Error: ' + e.message;
      }

      // Test SizedButtonPlugin
      try {
        document.getElementById('sizedbutton-plugin-status').textContent = 'Available';
      } catch (e) {
        document.getElementById('sizedbutton-plugin-status').textContent = 'Error: ' + e.message;
      }

      // Test if Tweakpane can recognize the plugins
      try {
        const pane = new tweakpane.Pane({ title: 'Test' });

        pane.registerPlugin(TweakpaneCompactKit.SplitLayoutPlugin);
        pane.registerPlugin(TweakpaneCompactKit.SizedButtonPlugin);

        output.innerHTML += '<br><b>Successfully registered plugins!</b>';

        // Test adding blades
        try {
          const splitBlade = pane.addBlade({
            view: 'split-layout',
            direction: 'row',
            sizes: [50, 50],
            children: ['leaf', 'leaf']
          });
          output.innerHTML += '<br>✓ SplitLayout blade created!';

          const sizedButtonBlade = pane.addBlade({
            view: 'sized-button',
            title: 'Test Button',
            units: 2
          });
          output.innerHTML += '<br>✓ SizedButton blade created!';
        } catch (e) {
          output.innerHTML += '<br>✗ Error: ' + e.message;
        }
      } catch (e) {
        output.innerHTML += '<br>✗ Tweakpane error: ' + e.message;
      }
    });
  </script>
</body>
</html>